<!-- switchbot-bot-push.xml（例） -->
<macro name="switchbot-bot-push" icon="PLAY">
  <!-- SwitchBot Botのサービスと特性を宣言 -->
  <assert-service uuid="cba20d00-224d-11e6-9fb8-0002a5d5c51b">
    <!-- 実行コマンド用（Write） -->
    <assert-characteristic uuid="cba20002-224d-11e6-9fb8-0002a5d5c51b">
      <property name="WRITE" requirement="MANDATORY"/>
    </assert-characteristic>
    <!-- 一部FWでは通知を有効化してからでないと反応しない -->
    <assert-characteristic uuid="cba20003-224d-11e6-9fb8-0002a5d5c51b">
      <property name="NOTIFY" requirement="MANDATORY"/>
      <assert-cccd/>
    </assert-characteristic>
  </assert-service>

  <!-- 通知を有効化（CCCD 0x2902 に 0x0100） -->
  <write-descriptor
    service-uuid="cba20d00-224d-11e6-9fb8-0002a5d5c51b"
    characteristic-uuid="cba20003-224d-11e6-9fb8-0002a5d5c51b"
    uuid="00002902-0000-1000-8000-00805f9b34fb"
    value="0100" />

  <!-- Botを“押す”コマンド（0x57 01 00） -->
  <write
    service-uuid="cba20d00-224d-11e6-9fb8-0002a5d5c51b"
    characteristic-uuid="cba20002-224d-11e6-9fb8-0002a5d5c51b"
    value="570100"
    type="WRITE_REQUEST" />

  <!-- 念のため応答通知を待機（5秒） -->
  <wait-for-notification
    service-uuid="cba20d00-224d-11e6-9fb8-0002a5d5c51b"
    characteristic-uuid="cba20003-224d-11e6-9fb8-0002a5d5c51b"
    timeout="5000" />
</macro>
